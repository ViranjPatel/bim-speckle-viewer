# BIM Speckle Viewer\n\nA professional BIM (Building Information Modeling) viewer application with Speckle integration and file upload capabilities. Built with React, Node.js, and the Speckle Viewer SDK.\n\n## Features\n\nğŸ—ï¸ **Professional BIM Viewer**\n- Speckle 3D viewer integration\n- Support for industry-standard BIM formats\n- Real-time 3D model visualization\n- Advanced viewer controls and settings\n\nğŸ“ **File Upload & Management**\n- Drag & drop file upload\n- Support for multiple BIM formats (IFC, OBJ, FBX, GLTF, etc.)\n- File management with grid/list views\n- Model metadata and properties\n\nğŸ”— **Speckle Integration**\n- Direct Speckle URL loading\n- Stream and commit visualization\n- Real-time model updates\n- Speckle API proxy for CORS handling\n\nâš¡ **Modern Architecture**\n- Full-stack TypeScript/JavaScript\n- React with hooks and modern patterns\n- Express.js backend with proper middleware\n- Professional UI/UX with animations\n\n## Supported File Formats\n\n- **IFC** - Industry Foundation Classes\n- **OBJ** - Wavefront OBJ\n- **FBX** - Autodesk FBX\n- **GLTF/GLB** - GL Transmission Format\n- **DAE** - COLLADA\n- **3DM** - Rhino 3D Model\n- **DWG/DXF** - AutoCAD formats\n- **STEP/STP** - Standard for Exchange of Product Data\n- **IGES/IGS** - Initial Graphics Exchange Specification\n\n## Quick Start\n\n### Prerequisites\n\n- Node.js 16+ \n- npm or yarn\n- Git\n\n### Installation\n\n1. **Clone the repository**\n   ```bash\n   git clone https://github.com/ViranjPatel/bim-speckle-viewer.git\n   cd bim-speckle-viewer\n   ```\n\n2. **Automated Setup (Recommended)**\n   \n   **For Windows:**\n   ```bash\n   setup.bat\n   ```\n   \n   **For Mac/Linux:**\n   ```bash\n   chmod +x setup.sh\n   ./setup.sh\n   ```\n   \n   **Or manually:**\n   ```bash\n   npm run setup\n   ```\n\n3. **Environment Configuration**\n   \n   The setup script will create a `.env` file. Update it with your configuration:\n   ```env\n   PORT=5000\n   NODE_ENV=development\n   SPECKLE_SERVER_URL=https://speckle.xyz\n   CLIENT_URL=http://localhost:3000\n   ```\n\n4. **Start Development Server**\n   ```bash\n   npm run dev\n   ```\n\n   This will start both backend (port 5000) and frontend (port 3000) servers.\n\n5. **Open Browser**\n   \n   Navigate to `http://localhost:3000`\n\n### Troubleshooting Setup Issues\n\nIf you encounter the \"Could not read package.json\" error:\n\n1. **Ensure you're in the correct directory:**\n   ```bash\n   cd bim-speckle-viewer\n   pwd  # Should show the project root\n   ```\n\n2. **Manual dependency installation:**\n   ```bash\n   # Install server dependencies\n   npm install\n   \n   # Install client dependencies\n   cd client\n   npm install\n   cd ..\n   \n   # Create environment file\n   cp .env.example .env\n   \n   # Start development\n   npm run dev\n   ```\n\n3. **Check Node.js version:**\n   ```bash\n   node --version  # Should be 16 or higher\n   npm --version\n   ```\n\n4. **Clear npm cache if needed:**\n   ```bash\n   npm cache clean --force\n   ```\n\n## Project Structure\n\n```\nbim-speckle-viewer/\nâ”œâ”€â”€ client/                 # React frontend\nâ”‚   â”œâ”€â”€ public/            # Static assets\nâ”‚   â”œâ”€â”€ src/\nâ”‚   â”‚   â”œâ”€â”€ components/    # React components\nâ”‚   â”‚   â”œâ”€â”€ pages/         # Page components\nâ”‚   â”‚   â”œâ”€â”€ store/         # State management\nâ”‚   â”‚   â”œâ”€â”€ utils/         # Utility functions\nâ”‚   â”‚   â””â”€â”€ App.js         # Main app component\nâ”‚   â””â”€â”€ package.json\nâ”œâ”€â”€ server/                # Express backend\nâ”‚   â”œâ”€â”€ routes/           # API routes\nâ”‚   â”‚   â”œâ”€â”€ upload.js     # File upload handling\nâ”‚   â”‚   â”œâ”€â”€ speckle.js    # Speckle API proxy\nâ”‚   â”‚   â””â”€â”€ models.js     # Model management\nâ”‚   â””â”€â”€ index.js          # Server entry point\nâ”œâ”€â”€ uploads/              # File storage (auto-created)\nâ”‚   â”œâ”€â”€ models/          # Uploaded model files\nâ”‚   â””â”€â”€ metadata/        # Model metadata\nâ”œâ”€â”€ .env.example         # Environment template\nâ”œâ”€â”€ package.json         # Root package config\nâ”œâ”€â”€ setup.bat           # Windows setup script\nâ”œâ”€â”€ setup.sh            # Unix setup script\nâ””â”€â”€ README.md\n```\n\n## API Endpoints\n\n### File Upload\n- `POST /api/upload/model` - Upload single model file\n- `POST /api/upload/models` - Upload multiple model files\n- `GET /api/upload/formats` - Get supported file formats\n\n### Model Management\n- `GET /api/models` - List all uploaded models\n- `GET /api/models/:id` - Get specific model\n- `DELETE /api/models/:id` - Delete model\n- `PATCH /api/models/:id` - Update model metadata\n\n### Speckle Integration\n- `GET /api/speckle/streams/:streamId` - Get stream data\n- `POST /api/speckle/validate-url` - Validate Speckle URL\n- `GET /api/speckle/server-info` - Get server information\n\n### System\n- `GET /api/health` - Health check endpoint\n\n## Usage Guide\n\n### 1. Loading Speckle Models\n\n1. Navigate to the Viewer page\n2. Enter a Speckle URL in the format:\n   ```\n   https://speckle.xyz/streams/{streamId}\n   https://speckle.xyz/streams/{streamId}/commits/{commitId}\n   https://speckle.xyz/streams/{streamId}/objects/{objectId}\n   ```\n3. Click \"Load\" to visualize the model\n\n### 2. Uploading BIM Files\n\n1. Go to the Upload page\n2. Drag & drop files or click to browse\n3. Supported formats will be automatically detected\n4. Monitor upload progress\n5. View uploaded models in the viewer\n\n### 3. Managing Models\n\n1. Access the Models page for your library\n2. Search and filter models\n3. Switch between grid and list views\n4. Download or delete models as needed\n\n### 4. Viewer Controls\n\n- **Navigation**: Mouse controls for orbit, pan, zoom\n- **Sidebar**: Toggle with menu button\n- **Settings**: Adjust lighting, display options\n- **Properties**: View model metadata and properties\n\n## Configuration\n\n### Environment Variables\n\n| Variable | Description | Default |\n|----------|-------------|----------|\n| `PORT` | Server port | `5000` |\n| `NODE_ENV` | Environment | `development` |\n| `SPECKLE_SERVER_URL` | Speckle server URL | `https://speckle.xyz` |\n| `CLIENT_URL` | Frontend URL for CORS | `http://localhost:3000` |\n| `MAX_FILE_SIZE` | Upload limit | `100MB` |\n| `UPLOAD_DIR` | Upload directory | `uploads` |\n\n### Viewer Settings\n\nCustomize the 3D viewer through the sidebar:\n- Grid and axes display\n- Ambient and directional lighting\n- Background color\n- Navigation controls\n\n## Development\n\n### Scripts\n\n- `npm run dev` - Start development servers\n- `npm run server` - Start backend only\n- `npm run client` - Start frontend only\n- `npm run build` - Build for production\n- `npm run setup` - Install all dependencies\n\n### Common Issues\n\n**\"Could not read package.json\" Error:**\n- Ensure you're in the project root directory\n- Run `npm install` in both root and client directories\n- Check that both package.json files exist\n\n**Upload Fails:**\n- Check file size (100MB limit)\n- Verify file format is supported\n- Ensure server has write permissions\n\n**Speckle Models Won't Load:**\n- Verify URL format is correct\n- Check network connectivity\n- Ensure Speckle server is accessible\n\n**Port Already in Use:**\n- Change PORT in .env file\n- Kill existing processes: `npx kill-port 3000 5000`\n\n## Deployment\n\n### Production Build\n\n```bash\n# Build frontend\nnpm run build\n\n# Start production server\nNODE_ENV=production npm start\n```\n\n### Environment Setup\n\n1. Set `NODE_ENV=production`\n2. Configure proper `CLIENT_URL` for your domain\n3. Set up file storage (local or cloud)\n4. Configure reverse proxy (nginx) if needed\n\n## Contributing\n\n1. Fork the repository\n2. Create feature branch: `git checkout -b feature/amazing-feature`\n3. Commit changes: `git commit -m 'Add amazing feature'`\n4. Push to branch: `git push origin feature/amazing-feature`\n5. Open Pull Request\n\nSee [CONTRIBUTING.md](CONTRIBUTING.md) for detailed guidelines.\n\n## License\n\nMIT License - see LICENSE file for details.\n\n## Acknowledgments\n\n- [Speckle](https://speckle.systems/) for the excellent 3D viewer SDK\n- React and Node.js communities\n- BIM and AEC industry for format standards\n\n---\n\n**Professional BIM Viewer** - Built with â¤ï¸ for the AEC industry"